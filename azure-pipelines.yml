trigger:
- main

pool:
  Default
  #vmImage: ubuntu-latest
  #MylocalPool
  
variables:
  LT_USERNAME: 'vaneetb'     # Replace with your LambdaTest username
  LT_ACCESS_KEY: 'PQ2AhuxqqOWAfvzfJlvPaOqusS7YKqfwFJR6DoWY2vsA8CvTzC'     # Replace with your LambdaTest access key
  LT_BUILD_NAME: 'Azure_testng_demo'

stages:
- stage: BuildAndTest
  jobs:
  - job: BuildAndTestJob
    steps:
      - task: configuration@1
        inputs:
            connection: vaneet-test
            #isTunnelActivate: true
            #tunnelOptions: '{"tunnelName": "ABC"}'
      - script: |
          mvn clean install -DskipTests
      - script: "mvn test -D suite=single.xml"
        displayName: "Command Line Script"
        env:
          LT_USERNAME: $(LT_USERNAME)
          LT_ACCESS_KEY: $(LT_ACCESS_KEY)
          LT_BUILD_NAME: $(LT_BUILD_NAME)
      - task: LambdatestResults@1
        displayName: "LambdaTest Results"
        env:
          LT_USERNAME: $(LT_USERNAME)
          LT_ACCESS_KEY: $(LT_ACCESS_KEY)
          LT_BUILD_NAME: $(LT_BUILD_NAME)
        
# - stage: LambdatestResults
#   jobs:
#   - job: LambdatestResultsJob
#     steps:
#       - script: |
#           echo "Hello"
